{"componentChunkName":"component---src-templates-blog-post-js","path":"/django/logout/","result":{"data":{"site":{"siteMetadata":{"title":"hong_devlog","author":"hongdev","siteUrl":"https://hong-dev.github.io","comment":{"disqusShortName":"","utterances":"hong-dev/hong-dev.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"0a7164c2-185c-515c-a54d-9602ba5c7526","excerpt":"Loginê³¼ Logoutì„ êµ¬í˜„í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ë¡œ ì§„í–‰í•œë‹¤.    : ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹´ì•„ log-in ìš”ì²­   : ì •ë³´ë¥¼ í™•ì¸ í›„ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ access-token ë°œí–‰  : ì „ë‹¬ ë°›ì€ access-tokenì„ browser storageì— ì €ì¥ (ì¿ í‚¤ í˜¹ì€ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€)  : storageì— ì €ì¥ë˜ì–´ ìˆëŠ” tokenì„ request.headersì— ë‹´ì•„ì„œ ì›í•˜ëŠ” ì •ë³´ë¥¼ ìš”ì²­   : tokenì„ í™•ì¸í•´ì„œ ìš”ì²­í•œ ì •ë³´ë¥¼ return  : userê°€ log-outâ€¦","html":"<p>Loginê³¼ Logoutì„ êµ¬í˜„í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ë¡œ ì§„í–‰í•œë‹¤.  </p>\n<ol>\n<li><code class=\"language-text\">Front</code> : ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹´ì•„ log-in ìš”ì²­</li>\n<li><code class=\"language-text\">Back</code>  : ì •ë³´ë¥¼ í™•ì¸ í›„ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ access-token ë°œí–‰</li>\n<li><code class=\"language-text\">Front</code> : ì „ë‹¬ ë°›ì€ access-tokenì„ browser storageì— ì €ì¥ (ì¿ í‚¤ í˜¹ì€ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€)</li>\n<li><code class=\"language-text\">Front</code> : storageì— ì €ì¥ë˜ì–´ ìˆëŠ” tokenì„ request.headersì— ë‹´ì•„ì„œ ì›í•˜ëŠ” ì •ë³´ë¥¼ ìš”ì²­</li>\n<li><code class=\"language-text\">Back</code>  : tokenì„ í™•ì¸í•´ì„œ ìš”ì²­í•œ ì •ë³´ë¥¼ return</li>\n<li><code class=\"language-text\">Front</code> : userê°€ log-outì„ í•˜ë©´, browser storageì— ì €ì¥ë˜ì–´ ìˆëŠ” tokenì„ ì‚­ì œ</li>\n</ol>\n<br>\n<p>ìœ„ì˜ ë°©ë²•ì„ ë³´ë©´, ì„œë²„ì— ë¡œê·¸ì•„ì›ƒ ìš”ì²­ì„ ë”°ë¡œ í•˜ì§€ ì•Šì•„ë„ frontì—ì„œ token ì‚­ì œë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.<br>\nì¦‰, browser storageì˜ ê´€ë¦¬ëŠ” frontê°€ í•˜ê³ , backendëŠ” ê·¸ sessionì— ì ‘ê·¼í•˜ì§€ ëª»í•œë‹¤.</p>\n<br>\n<p>ê·¸ë ‡ë‹¤ë©´ backendì—ì„œ access-token ë§Œë£Œì™€ log-outì„ ê´€ë¦¬í•  ìˆ˜ëŠ” ì—†ì„ê¹Œ?</p>\n<blockquote>\n<h2 id=\"cacheìºì‹œ\" style=\"position:relative;\"><a href=\"#cache%EC%BA%90%EC%8B%9C\" aria-label=\"cacheìºì‹œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cache(ìºì‹œ)</h2>\n<p>í•œ ë²ˆ ì‚¬ìš©í–ˆë˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬, ë‹¤ì‹œ ì‚¬ìš©í•  ë•Œ ë¹ ë¥´ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤.<br>\nì…ì¶œë ¥ì´ ì¦ê±°ë‚˜ ìì£¼ ë°”ë€ŒëŠ” ì •ë³´ ê°™ì€ ê²½ìš°ì—ëŠ” databaseì— ì €ì¥í•˜ë©´ ì†ë„ì™€ ë³´ì•ˆ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.<br>\nê·¸ë˜ì„œ ì„ì‹œë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê³µê°„ì— ì €ì¥í•´ì„œ ë¹ ë¥´ê²Œ êº¼ë‚´ì“¸ ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>\n</blockquote>\n<br>\n<h2 id=\"login\" style=\"position:relative;\"><a href=\"#login\" aria-label=\"login permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LOGIN</h2>\n<ul>\n<li>[1] djangoì—ì„œ cacheë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ import í•´ì•¼í•œë‹¤.</li>\n<li>ë¡œê·¸ì¸í•  ë•Œ frontë¡œ tokenì„ ë°”ë¡œ ë„˜ê²¨ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, cacheì— tokenì„ ì €ì¥í•˜ê³  tokenì„ ì—´ ìˆ˜ ìˆëŠ” ì—´ì‡ ë¥¼ ë„˜ê²¨ì¤€ë‹¤.</li>\n<li>tokenê³¼ ì—´ì‡ ëŠ” <code class=\"language-text\">cache.set(key, token)</code> ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‘˜ì„ ë¬¶ì–´ì„œ ìºì‹œì— ì €ì¥í•œë‹¤.</li>\n<li>[2] ì—´ì‡ ëŠ” tokenê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì‰½ê²Œ í•´í‚¹ë˜ì§€ ì•ŠëŠ” ì •ë³´ì—¬ì•¼ í•˜ë¯€ë¡œ, randomìœ¼ë¡œ user_numberë¥¼ ë§Œë“¤ì–´ì„œ ì €ì¥í–ˆë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>cache <span class=\"token keyword\">import</span> cache  <span class=\"token comment\">#---[1]</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">LogInView</span><span class=\"token punctuation\">(</span>View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">post</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        token <span class=\"token operator\">=</span> jwt<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'email'</span> <span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                            SECRET_KEY<span class=\"token punctuation\">,</span>\n                            algorithm <span class=\"token operator\">=</span> <span class=\"token string\">'HS256'</span>\n                          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n\n        user_number <span class=\"token operator\">=</span> random_number_generator<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#---[2]</span>\n        cache<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>user_number<span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"token\"</span> <span class=\"token punctuation\">:</span> user_number<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> status <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<h2 id=\"logout\" style=\"position:relative;\"><a href=\"#logout\" aria-label=\"logout permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LOGOUT</h2>\n<ul>\n<li>tokenê³¼ ì—´ì‡ ê°€ ì„œë¡œ ë§¤ì¹˜ë˜ì–´ cacheì— ì €ì¥ë˜ì–´ ìˆëŠ”ë°, <code class=\"language-text\">cache.delete(key)</code> ë¥¼ ì‚¬ìš©í•˜ì—¬ ê·¸ ìºì‹œë¥¼ ì‚­ì œí•˜ë©´ ì—´ì‡ ì™€ tokenì˜ ì—°ê²°ê³ ë¦¬ê°€ ì‚¬ë¼ì§„ë‹¤.</li>\n<li>frontì—ì„œ ì—´ì‡ ë¥¼ ë„˜ê²¨ì¤€ë‹¤ê³  í•´ë„ ì´ë¯¸ ìºì‹œê°€ ì‚­ì œë˜ì—ˆê¸° ë•Œë¬¸ì—, tokenê³¼ ë§¤ì¹˜ë˜ì—ˆë˜ ê·¸ ì—´ì‡ ëŠ” ì´ì œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>cache <span class=\"token keyword\">import</span> cache\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">LogOutView</span><span class=\"token punctuation\">(</span>View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token decorator annotation punctuation\">@login_required</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        cache<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>token<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>status <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<h2 id=\"\" style=\"position:relative;\"><a href=\"#\" aria-label=\" permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¬</h2>\n<ul>\n<li>ë¡œê·¸ì¸ í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ëœë¤ ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì¼ê¹Œ?<br>\níšŒì›ê°€ì…ì„ í•  ë•Œ ëœë¤ íšŒì›ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ê³ , ê·¸ê±¸ databaseì— ë„£ì–´ë‘ê³  ê·¸ê±¸ tokenì˜ ì—´ì‡ ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì–´ë–¨ê¹Œ?<br>\nê·¸ë ‡ê²Œ í•œë‹¤ë©´ ì—¬ëŸ¬ ê°œì˜ ê¸°ê¸°ì— ë¡œê·¸ì¸ì„ í•´ë†“ì€ ê²½ìš°, í•œ ê¸°ê¸°ì—ì„œ ë¡œê·¸ì•„ì›ƒì„ í•œë‹¤ë©´ ëª¨ë“  ê¸°ê¸°ê°€ ë¡œê·¸ì•„ì›ƒ ë˜ëŠ” í˜„ìƒì´ ìƒê¸¸ ê²ƒì´ë‹¤.<br>\nì´ëŸ° ì´ìœ ë¡œ ì—¬ê¸°ì—ì„œëŠ” ë¡œê·¸ì¸ í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ë²ˆí˜¸ë¥¼ ìƒì„±í•´ì„œ ê° ê¸°ê¸°ë³„ë¡œ ë‹¤ë¥¸ ì—´ì‡ ë“¤ì„ ê°€ì§€ë„ë¡ í•˜ì˜€ë‹¤.</li>\n</ul>","frontmatter":{"title":"Logout API using Cache","date":"May 25, 2020","category":"django","thumbnail":null}}},"pageContext":{"slug":"/django/logout/","previous":{"fields":{"slug":"/algorithm/printer/"},"frontmatter":{"title":"ì¤‘ìš”ë„ê°€ ë†’ì€ ìˆœì„œëŒ€ë¡œ ì¸ì‡„í•  ë•Œ ì¸ì‡„ ìˆœì„œ ì°¾ê¸°","category":"algorithm","draft":false}},"next":{"fields":{"slug":"/blog/category/"},"frontmatter":{"title":"Thumbnailê³¼ Post pageì— category ì •ë³´ ë„£ê¸°","category":"gatsby","draft":false}}}},"staticQueryHashes":["2353110810","3128451518"]}